##### 项目目录结构

1. Gemfile  
2. Rakefile  
3. config  
4. lib  
5. test  
6. Gemfile.lock app  
7. config.ru  
8. log  
9. tmp  
10. README.md  
11. bin  
12. db  
13. public  
14. vendor  

##### 建立一个新的rails项目

如：`rails new rails101`  

进入新建好的项目, 并建立 git 做版本控制  
1. `cd rails101`  
2. `git init`  
3. `git add .`  
4. `git commit -m "Initial Commit"`

##### 安装需要的gem 

1. Bootstrap  
2. simple_form  

###### 安装 devise gem

Gemfile 新增一行 `gem 'devise'`

然后执行

```
bundle install
```

产生会员系统的必要文件

```
rails g devise:install
rails g devise user
rake db:migrate
```



#####制作提示信息   

`flashes`

##### 讨论群的新增、修改、删除功能

```
class GroupsController < ApplicationController
  def index
    @groups = Group.all
  end
  
  def show
    @group = Group.find(params[:id])
  end
 
  def new
    @group = Group.new
  end
  def create
    @group = Group.new(group_params)
    @group.save
     redirect_to groups_path
  end
 
  def edit
    @group = Group.find(params[:id])
  end
  def update
    @group = Group.find(params[:id])
    @group.update(group_params)
    redirect_to groups_path, notice: "Update Success"
  end
  
  def destroy
    @group = Group.find(params[:id])
    @group.destroy
    flash[:alert] = "Group deleted"
    redirect_to groups_path
  end

  private

  def group_params
    params.require(:group).permit(:title, :description)
  end
end
```

###### 限制“标题为空”的Group，不能被新增

```
class Group < ApplicationRecord
 validates :title, presence: true
end
```

##### Rails 的 CRUD 与 RESTful

![CRUD](/Users/shiyuanzhong/Downloads/CRUD.jpg)



#####群组与使用者的关联

新增 user_id 到 group 的 table 里

```
class AddUserIdToGroup < ActiveRecord::Migration[5.0]
  def change
    add_column :groups, :user_id, :integer
  end
end 
```

user 与 group 的双向关系

```
class User < ApplicationRecord
  # Include default devise modules. Others available are:

  # :confirmable, :lockable, :timeoutable and :omniauthable

  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  has_many :groups
end
```

```
class Group < ApplicationRecord
  belongs_to :user
  validates :title, presence: true
end
```



##### 讨论群(发表文章)功能

